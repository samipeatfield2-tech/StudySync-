<!DOCTYPE html>
<html>
<head>
  <title>Syncing Study Toolsâ€¦</title>
  <script>
    window.onload = function () {
      const hash = window.location.hash.substring(1);
      const params = {};
      hash.split('&').forEach(part => {
        const [key, value] = part.split('=');
        params[key] = decodeURIComponent(value);
      });

      if (params.code) {
  fetch('https://studysync-rb3m.onrender.com/get-token', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ code: params.code })
  })
  .then(res => res.json())
  .then(data => {
    localStorage.setItem('spotify_access_token', data.access_token);
    window.location.href = '/'; // Redirect to your dashboard
  })
  .catch(err => {
    console.error('Token exchange failed:', err);
  });
}

    };
  </script>
</head>
<body style="background:#111; color:#eee; font-family:sans-serif; text-align:center;">
  <h2>ðŸŽ§ Syncing Study Toolsâ€¦</h2>
  <p>Please wait while we complete your login.</p>
</body>
</html>
